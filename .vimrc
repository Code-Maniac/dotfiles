      ""██▒   █▓ ██▓ ███▄ ▄███▓ ██▀███   ▄████▄
    "" ▓██░   █▒▓██▒▓██▒▀█▀ ██▒▓██ ▒ ██▒▒██▀ ▀█
     "" ▓██  █▒░▒██▒▓██    ▓██░▓██ ░▄█ ▒▒▓█    ▄
     ""  ▒██ █░░░██░▒██    ▒██ ▒██▀▀█▄  ▒▓▓▄ ▄██▒
"" ██▓    ▒▀█░  ░██░▒██▒   ░██▒░██▓ ▒██▒▒ ▓███▀ ░
"" ▒▓▒    ░ ▐░  ░▓  ░ ▒░   ░  ░░ ▒▓ ░▒▓░░ ░▒ ▒  ░
"" ░▒     ░ ░░   ▒ ░░  ░      ░  ░▒ ░ ▒░  ░  ▒
 "" ░        ░░   ▒ ░░      ░     ░░   ░ ░
 "" ░        ░   ░         ░      ░     ░ ░
 "" ░       ░                           ░
"" ███▄    █  ██▓ ▄████▄   ██ ▄█▀    ▄▄▄██▀▀▀▄▄▄     ▓██   ██▓ ▄████▄   ▒█████   ▄████▄   ██ ▄█▀
"" ██ ▀█   █ ▓██▒▒██▀ ▀█   ██▄█▒       ▒██  ▒████▄    ▒██  ██▒▒██▀ ▀█  ▒██▒  ██▒▒██▀ ▀█   ██▄█▒
" ▓██  ▀█ ██▒▒██▒▒▓█    ▄ ▓███▄░       ░██  ▒██  ▀█▄   ▒██ ██░▒▓█    ▄ ▒██░  ██▒▒▓█    ▄ ▓███▄░
" ▓██▒  ▐▌██▒░██░▒▓▓▄ ▄██▒▓██ █▄    ▓██▄██▓ ░██▄▄▄▄██  ░ ▐██▓░▒▓▓▄ ▄██▒▒██   ██░▒▓▓▄ ▄██▒▓██ █▄
" ▒██░   ▓██░░██░▒ ▓███▀ ░▒██▒ █▄    ▓███▒   ▓█   ▓██▒ ░ ██▒▓░▒ ▓███▀ ░░ ████▓▒░▒ ▓███▀ ░▒██▒ █▄
" ░ ▒░   ▒ ▒ ░▓  ░ ░▒ ▒  ░▒ ▒▒ ▓▒    ▒▓▒▒░   ▒▒   ▓▒█░  ██▒▒▒ ░ ░▒ ▒  ░░ ▒░▒░▒░ ░ ░▒ ▒  ░▒ ▒▒ ▓▒
" ░ ░░   ░ ▒░ ▒ ░  ░  ▒   ░ ░▒ ▒░    ▒ ░▒░    ▒   ▒▒ ░▓██ ░▒░   ░  ▒     ░ ▒ ▒░   ░  ▒   ░ ░▒ ▒░
  " ░   ░ ░  ▒ ░░        ░ ░░ ░     ░ ░ ░    ░   ▒   ▒ ▒ ░░  ░        ░ ░ ░ ▒  ░        ░ ░░ ░
     "    ░  ░  ░ ░      ░  ░       ░   ░        ░  ░░ ░     ░ ░          ░ ░  ░ ░      ░  ░
     "          ░                                    ░ ░     ░                 ░
" ▄████▄   ▒█████  ▓█████▄ ▓█████  ███▄ ▄███▓ ▄▄▄       ███▄    █  ██▓ ▄▄▄       ▄████▄
" ▒██▀ ▀█  ▒██▒  ██▒▒██▀ ██▌▓█   ▀ ▓██▒▀█▀ ██▒▒████▄     ██ ▀█   █ ▓██▒▒████▄    ▒██▀ ▀█
" ▒▓█    ▄ ▒██░  ██▒░██   █▌▒███   ▓██    ▓██░▒██  ▀█▄  ▓██  ▀█ ██▒▒██▒▒██  ▀█▄  ▒▓█    ▄
" ▒▓▓▄ ▄██▒▒██   ██░░▓█▄   ▌▒▓█  ▄ ▒██    ▒██ ░██▄▄▄▄██ ▓██▒  ▐▌██▒░██░░██▄▄▄▄██ ▒▓▓▄ ▄██▒
" ▒ ▓███▀ ░░ ████▓▒░░▒████▓ ░▒████▒▒██▒   ░██▒ ▓█   ▓██▒▒██░   ▓██░░██░ ▓█   ▓██▒▒ ▓███▀ ░
" ░ ░▒ ▒  ░░ ▒░▒░▒░  ▒▒▓  ▒ ░░ ▒░ ░░ ▒░   ░  ░ ▒▒   ▓▒█░░ ▒░   ▒ ▒ ░▓   ▒▒   ▓▒█░░ ░▒ ▒  ░
 " ░  ▒     ░ ▒ ▒░  ░ ▒  ▒  ░ ░  ░░  ░      ░  ▒   ▒▒ ░░ ░░   ░ ▒░ ▒ ░  ▒   ▒▒ ░  ░  ▒
" ░        ░ ░ ░ ▒   ░ ░  ░    ░   ░      ░     ░   ▒      ░   ░ ░  ▒ ░  ░   ▒   ░
" ░ ░          ░ ░     ░       ░  ░       ░         ░  ░         ░  ░        ░  ░░ ░
" ░                  ░                                                           ░

" PLUGINS
call plug#begin('~/.vim/plugged')
	" COLORSCHEMES
	Plug 'rafi/awesome-vim-colorschemes'

	" CODE GENERATION
	Plug 'Sirver/Ultisnips'
	"personlized snippets
	Plug 'honza/vim-snippets', {
		\'do': 'ln -s ~/.vim/plugged/vim-snippets/snippets ~/.dotfiles/snippets'
	\}

	Plug 'junegunn/fzf', { 'dir': '~/.fzf', 'do': 'yes \| ./install --all' }
	Plug 'junegunn/vim-easy-align'
	Plug 'junegunn/rainbow_parentheses.vim'
	Plug 'junegunn/vim-github-dashboard'
	Plug 'junegunn/gv.vim'

	" DOXYGEN COMMENTING
	Plug 'mrtazz/DoxygenToolkit.vim'

	" NAVIGATION
	Plug 'easymotion/vim-easymotion'
	Plug 'unblevable/quick-scope'

	Plug 'tpope/vim-repeat'
	Plug 'tpope/vim-surround'
	Plug 'tpope/vim-ragtag'
	Plug 'tpope/vim-fugitive'
	Plug 'tpope/vim-commentary'
	Plug 'tpope/vim-endwise'
	Plug 'tpope/vim-abolish'
	Plug 'tpope/vim-unimpaired'
	Plug 'tpope/vim-afterimage'
	Plug 'tpope/vim-dispatch'
	Plug 'vim-scripts/argtextobj.vim'
	Plug 'AndrewRadev/splitjoin.vim'
	Plug 'alvan/vim-closetag'

	" BETTER VIM DIFF
	Plug 'chrisbra/vim-diff-enhanced'

	" BETTER VIM-TMUX WINDOW NAVIGATION 
	Plug 'christoomey/vim-tmux-navigator'

	Plug 'Raimondi/delimitMate'

	" GUI FILE EXPLORER IN VIM
	Plug 'scrooloose/nerdtree'
	Plug 'justinmk/vim-gtfo'

	" BETTER SYNTAX HIGHLIGHTING
	"Plug 'bfrg/vim-cpp-modern'
	Plug 'code-maniac/vim-cpp-modern'
	Plug 'pangloss/vim-javascript'
	Plug 'peterhoeg/vim-qml'
	Plug 'udalov/kotlin-vim'

	" AIRLINE THEMES
	Plug 'vim-airline/vim-airline'
	Plug 'vim-airline/vim-airline-themes'

	" VIEW MAN PAGES IN VIM
	Plug 'vim-utils/vim-man'

	" MARKDOWN SUPPORT IN VIM
	"Plug 'gabrielelana/vim-markdown'

	" FOR FUN
	Plug 'vim-scripts/TeTrIs.vim'
call plug#end()

" set fullscreen mode on startup in gui mode.
if has("gui_running")
    set lines=1200 columns=1200
endif

" SET COMPAT AND COLOR MODE
set nocompatible " Vim rather than Vi
set t_Co=256

" SYNTAX
syntax enable
" set background=dark
"colorscheme solarized
colorscheme iceberg

set guifont=Hack

" GENERAL STUFF
set ruler                           " always show cursor position.
set showmode                        " display curent mode.
set showcmd                         " display incomplete commands.
set nu                              " show line numbers.
set relativenumber
set undofile                        " stores undo state even when files are closed.
set title                           " show file in titlebar
set showmatch                       " shows matching bracket - briefly jumps to it.
set backspace=indent,eol,start      " liberal backspacing in insert mode
set nowrapscan                      " don't wrap to start of file when forward searching.

" DEFAULT TAB STOPS & INDENTING
set tabstop=4                       " tab stops
set softtabstop=4
set shiftwidth=4                    " number of spaces to use for each step of (auto)indent
set expandtab
set autoindent
set smartindent
set copyindent
" set cindent
set smarttab

" configure tabs for work projects
let s:prolec_files = [
	\ '~/projects/r2_display/*.c',
	\ '~/projects/r2_display/*.cpp',
	\ '~/projects/r2_display/*.h',
	\ '~/projects/r2_display_tests/*.cpp',
	\ '~/projects/r2_display_tests/*.h',
	\ '~/projects/r2_ecu_emulator/*.cpp',
	\ '~/projects/r2_ecu_emulator/*.h',
	\ '~/projects/r2_ecu_emulator_tests/*.cpp',
	\ '~/projects/r2_ecu_emulator_tests/*.h',
	\ '~/projects/j1939_stack/*.c',
	\ '~/projects/j1939_stack/*.cpp',
	\ '~/projects/j1939_stack/*.h'
\ ]

for pf in s:prolec_files
	execute "au BufRead,BufNewFile,BufEnter " . pf . " setlocal tabstop=3 softtabstop=0 shiftwidth=3 expandtab"
endfor

" TABS AND SPACING FOR WORK PROJECTS - may add more, this is for within linX vm.
" au BufRead,BufNewFile,BufEnter ~/projects/r2_display/*.cpp,~/projects/r2_display/*.h,~/projects/r2_display_tests/*.cpp,~/projects/r2_display_tests/*.h setlocal tabstop=3 softtabstop=0 shiftwidth=3 expandtab
" au BufRead,BufNewFile,BufEnter ~/projects/r2_ecu_emulator/*.cpp,~/projects/r2_ecu_emulator/*.h,~/projects/r2_ecu_emulator_tests/*.cpp,~/projects/r2_ecu_emulator_tests/*.h setlocal tabstop=3 softtabstop=0 shiftwidth=3 expandtab

" (0 function arguments on seperate lines align better.
" g0 aligns private, public with class
" :0 aligns case statements to switch
set cino+=(0,g0,:0,t0,l1
set list
set listchars=tab:▸\ ,eol:¬,trail:~ "highlight tabs with an arrow. eol with ¬. trailing whitespace with ~

set history=1000                    " many histories
set smartcase
set ttyfast                         " smoother output, they claim

" SEARCH
set ignorecase
set incsearch

" TEXT WIDTH BASED ON FILETYPE
let s:text_widths = [
   \ ['cpp', 80 ],
   \ ['c', 80 ],
   \ ['hpp', 80 ],
   \ ['h', 80 ],
   \ ['gitcommit', 80],
   \ ['javascript', 80]
\ ]
for text_width in s:text_widths
	execute "autocmd Filetype " . text_width[0] . " setlocal tw=" . text_width[1]
	execute "autocmd Filetype " . text_width[0] . " setlocal colorcolumn=+1"
endfor

" TABS AND SPACING FOR WORK PROJECTS - may add more, this is for within linX vm.
au BufRead,BufNewFile,BufEnter ~/projects/r2_display/*.cpp,~/projects/r2_display/*.h,~/projects/r2_display_tests/*.cpp,~/projects/r2_display_tests/*.h setlocal tabstop=3 softtabstop=0 shiftwidth=3 expandtab

au BufRead,BufNewFile,BufEnter ~/projects/r2_ecu_emulator/*.cpp,~/projects/r2_ecu_emulator/*.h,~/projects/r2_ecu_emulator_tests/*.cpp,~/projects/r2_ecu_emulator_tests/*.h setlocal tabstop=3 softtabstop=0 shiftwidth=3 expandtab

au BufRead,BufNewFile,BufEnter ~/projects/createful_app/*.js setlocal tabstop=2 softtabstop=0 shiftwidth=2 expandtab



" hi ColorColumn guibg=#dddddd ctermbg=235
hi ColorColumn guibg=#dddddd ctermbg=1

" CHANGE COLOR OF THE DIFF ADD HIGHLIGHT TO MATCH CHANGE
hi DiffAdd cterm=bold ctermbg=24

" SET LOCATION OF VIMFILES SWAP, UNDO ETC
set dir=~/.vim/swap//
set undodir=~/.vim/undo//

" WINDOW SWITCHING
nnoremap <silent> <C-h> <C-w>h
nnoremap <silent> <C-j> <C-w>j
nnoremap <silent> <C-k> <C-w>k
nnoremap <silent> <C-l> <C-w>l

" WINDOW RESIZING
nnoremap <silent> + :exe "resize " . (winheight(0) * 3/2)<CR>
nnoremap <silent> - :exe "resize " . (winheight(0) * 2/3)<CR>

" Unicode support
if has("multi_byte")
	if &termencoding == ""
		let &termencoding = &encoding
	endif
	set encoding=utf-8
	setglobal fileencoding=utf-8
	set fileencodings=ucs-bom,utf-8,latin1
endif

" remain in visual mode when >> <<
vnoremap < <gv
vnoremap > >gv

" mappings to switch fileencoding/type easily
map <F7> :set fileencoding=
map <F8> :set filetype=

" Easy creation of new splits/tabs
"nnoremap <C-t> :tab split<SPACE>
"nnoremap <C-x> :split<SPACE>
"nnoremap <C-v> :vsplit<SPACE>

" Easy tab navigation
"go to next tab by pressing tab
map <TAB> :tabn<CR>
"go to previous tab by pressing ctrl tab
map <C-TAB> :tabp<CR>

" easy-align
" Start interactive EasyAlign in visual mode
xmap ga <Plug>(EasyAlign)
" Start interactive EasyAlign for a motion/text object
nmap ga <Plug>(EasyAlign)

"NERDTree
"open NERDTree
map <C-n> :NERDTreeToggle<CR>

" FZF
"open fzf
map <C-t> :FZF<CR>
"bind keys when in fzf window.
let g:fzf_action = {
	\ 'ctrl-t': 'tab split',
	\ 'ctrl-x': 'split',
	\ 'ctrl-v': 'vsplit' }
" set fzf layout
if has('nvim')
	let g:fzf_layout = { 'window': 'enew' }
else
	let g:fzf_layout = { 'down': "25%" }
endif

" set fzf colors to current colorscheme
let g:fzf_colors =
\ { 'fg':      ['fg', 'Normal'],
  \ 'bg':      ['bg', 'Normal'],
  \ 'hl':      ['fg', 'Comment'],
  \ 'fg+':     ['fg', 'CursorLine', 'CursorColumn', 'Normal'],
  \ 'bg+':     ['bg', 'CursorLine', 'CursorColumn'],
  \ 'hl+':     ['fg', 'Statement'],
  \ 'info':    ['fg', 'PreProc'],
  \ 'border':  ['fg', 'Ignore'],
  \ 'prompt':  ['fg', 'Conditional'],
  \ 'pointer': ['fg', 'Exception'],
  \ 'marker':  ['fg', 'Keyword'],
  \ 'spinner': ['fg', 'Label'],
  \ 'header':  ['fg', 'Comment'] }

" enable per command history.
let g:fzf_history_dir = '~/.local/share/fzf-history'

" DEOPLETE
let g:deoplete#enable_at_startup=1
" use tab selection of popup menu with deoplete
inoremap <expr> <tab> pumvisible() ? "\<C-n>" : "\<Tab>"
inoremap <expr> <S-tab> pumvisible() ? "\<C-p>" : "\<S-Tab>"

" " LANGUAGE SERVER
" let g:LanguageClient_serverCommands = {
" 	\ 'javascript': ['javascript-typescript-stdio'],
" 	\ 'javascript.jsx': ['tcp://127.0.0.1:2089'],
" 	\ 'python': ['pyls'],
" 	\ 'c': ['cquery', '--log-file=/tmp/cq.log'],
" 	\ 'cpp': ['cquery', '--log-files=/tmp/cq.log'],
" \}

" let g:LanguageClient_loadSettings=1
" let g:LanguageClient_settingsPath='~/.dotfiles/cquery_settings.json'

" set hidden
" " set signcolumn=yes

" set completefunc=LanguageClient#complete
" set formatexpr=LanguageClient_textDocument_rangeFormatting()

" nnoremap <silent> gh :call LanguageClient#textDocument_hover()<CR>
" nnoremap <silent> gd :call LanguageClient#textDocument_definition()<CR>
" nnoremap <silent> gr :call LanguageClient#textDocument_references()<CR>
" nnoremap <silent> gs :call LanguageClient#textDocument_documentSymbol()<CR>
" nnoremap <silent> gn :call LanguageClient#textDocument_rename()<CR>

" vertical diff
" set diffopt+=vertical

" VIM-Powerline
"set laststatus=2
let g:Powerline_symbols='fancy'

" VIM-AIR-LINE
let g:airline#extentions#tabline#enabled = 1
let g:airline_powerline_fonts = 1

"let g:airline_section_b = '%{strftime("%c")}'
let g:airline_section_y = 'BN: %{bufnr("%")}'

" TECHNICAL
set mouse=a
set fileencoding=utf-8

" Change mode of cursor while in the terminal - does not appear to work.
" let &t_SI = "\<Esc>[6 q"
" let &t_SR = "\<Esc>[4 q"
" let &t_EI = "\<Esc>[2 q"

" ultisnips
" Trigger configuration.
let g:UltiSnipsExpandTrigger="<c-s>"
let g:UltiSnipsJumpForwardTrigger="<c-j>"
let g:UltiSnipsJumpBackwardTrigger="<c-k>"

" If you want :UltiSnipsEdit to split your window. horzontally above the
" current doc.
let g:UltiSnipsEditSplit="horizontal"

let g:UltiSnipsSnippetsDir = "~/.vim/plugged/vim-snippets/snippets"

map <F2> :UltiSnipsEdit<CR>

" doxygen toolkit
let g:DoxygenToolkit_briefTag_pre="\\brief "
let g:DoxygenToolkit_paramTag_pre="\\param "
let g:DoxygenToolkit_returnTag="\\return "

" delete trailing whitespace on write in certain filetypes
autocmd BufWritePre *.c,*.cpp,*.h,*.hpp :%s/\s\+$//e

" go back to the line we were on when we last closed the file.
if !&diff
	autocmd BufReadPost * if &filetype !=# 'gitcommit' | if line("'\'") > 0 && line("'\"") <= line("$") | exe "normal! g`\"" | endif
	" autocmd BufWinEnter * silent loadview
endif

" open man page bindings
" open man page for word under cursor
map <leader>k <Plug>(Man)
" open man page for word under cursor in vsplit
map <leader>v <Plug>(Vman)

" autocmd BufWinLeave * mkview

let g:cpp_no_qt=0

" ctags bindings and additional tags files
map gd g<C-]>
map <C-\> :tab split<CR>:exec("tag ".expand("<cword>"))<CR>
map <A-]> :vsp <CR>:exec("tag ".expand("<cword>"))<CR>
set tags+=/opt/Qt-5.4.0/5.4/gcc/include/tags
